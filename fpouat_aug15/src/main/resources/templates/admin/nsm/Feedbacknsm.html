<!DOCTYPE html>
<html lang="en">

<head lang="en" th:replace="header :: header"></head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.9/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script> -->
    
<!--     <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.0/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.9/xlsx.full.min.js"></script>
 -->
  
</head>


</head>
	

<style>
body {
	background: white !important;
}
#overlay {
   position: fixed;
   left: 0%;
   top: 0%;
   z-index: 9999;
    width: 100%;
    background: rgba(255, 255, 255, .7);
    height: 100%;
        }
  #loader {
    position: fixed;
    display: block;
     left: 50%;
     top: 48%;
     z-index: 9999;
     width: 100%;
      height: 100%;
      background-image: url(images/report/loader.gif);
     background-repeat: no-repeat;
     margin: -77px 0 0 -75px;
        }
      
            .nav-pills .nav-link{
        color: #000;
        }
.nav-pills .nav-link.active{
	background-color: #0a3052;
	color:#fff;
}
	
</style>
</head>
<body>

<input type="hidden" th:value="${session.data}" id="empId" /> 
<input type="hidden" th:value="${session.data2}" id="sitecode" />
<input type="hidden" th:value="${session.data1}" id="role" />

<div id="overlay" style="display: none;">
        <div id="loader">
        <div style="font-size: 20px; padding-top:5%"><b>Please wait...</b>
</div>   </div> </div>
<div align=left style="margin-left: 1%; margin-right: 1%">
			<button type="button" class="btn btn-info" onclick="goback()" style="line-height: 16px;background-color: darkred;border-color: darkred;">Back
			</button>
</div>
	<h3 style="font-size: 19px; margin-left: 2%;">Dashboard> Miscellaneous>
		FeedBack</h3>
		<h3 style="text-align: center; color: #1616e0">NATIONAL SYSTEM ADMINISTRATOR</h3>
<div style="padding:0 1rem 0 1rem">
	<ul class="nav nav-pills" role="tablist" style="width: 100%;border: 2px solid;border-radius: 7px;margin-bottom: 20px;margin-top: 20px;">
        <li class="nav-item" id="hstryofroles" onclick="feedbckoffshow()" style="width: 50%;text-align: center; font-size:1.5rem; font-weight:700">
        <a class="nav-link active show" data-toggle="pill" href="javascript:;">OFFICERS FEEDBACK</a>
      </li>
      <li class="nav-item" id="userhstry" onclick="feedbackdcallfileshow()" style="width: 50%;text-align: center;font-size:1.5rem; font-weight:700" value="0">
        <a class="nav-link" data-toggle="pill" href="javascript:;">USERS FEEDBACK(THROUGH LINK)</a>
      </li>
   
    </ul>
    </div>
<br>
<br>

<div class="mx-4 my-4" id="feedbackofficersdiv" style="padding: 20px;">
 	
		
	<table id="feedbacksitetab" class="table table-bordered table-striped"
		style="font-size: 14px; text-align: center;">
		<thead style="background-color: #a1c4e6;">
			<tr style="background-color: #63cfe0">
					<th scope="col">S.No</th>
					<th scope="col">OFFID</th>
					<th scope="col">FEEDBACK DATE</th>
					<th scope="col">DUMMYcolumn</th>
					<th scope="col">FEEDBACK TEXT</th> 
			</tr>
		</thead>
		<tbody id="feedbackvalBody">
		<tr align="middle" class="rowDis" th:each="s1,iter : ${feedbackval}">
				<td width="1%" style="vertical-align: middle;"
					th:text="${iter.index+1}"></td>
				   <td style="vertical-align: middle;" th:text="${s1[0]}"></td>
					<td style="vertical-align: middle;" th:text="${s1[1]!=null ? s1[1] : '-'}"></td>
					<td style="vertical-align: middle;" th:text="${s1[2]!=null ? s1[2] : '-'}"></td>
					 <td style="vertical-align: middle;" th:text="${s1[3]!=null ? s1[3] : '-'}"></td> 

			</tr> 
		</tbody>
	</table>

</div>


<div class="mx-4 my-4" id="feedbackdcallfilesdiv" style="padding: 20px;display:none">
 	
		
	<table id="feedbackdcallsitetab" class="table table-bordered table-striped"
		style="font-size: 14px; text-align: center;">
		<thead style="background-color: #a1c4e6;">
			<tr style="background-color: #63cfe0">
					<th scope="col">S.No</th>
					<th scope="col">NAME</th>
					<th scope="col">DCALLLINK</th>
					<th scope="col">EMAILID</th>
					<th scope="col">MOBILENO</th>
					<th scope="col">FEEDBACK DATE</th>
					<th scope="col">RATING</th>
					<th scope="col">FEEDBACK TEXT</th> 
			</tr>
		</thead>
		<tbody id="feedbackdcallvalBody"> 
		<tr align="middle" class="rowDis" th:each="s1,iter : ${feedbackrplylinkval}">
				<td width="1%" style="vertical-align: middle;"
					th:text="${iter.index+1}"></td>
				   <td style="vertical-align: middle;" th:text="${s1[0]}"></td>
					<td style="vertical-align: middle;" th:text="${s1[1]!=null ? s1[1] : '-'}"></td>
					<td style="vertical-align: middle;" th:text="${s1[2]!=null ? s1[2] : '-'}"></td>
					 <td style="vertical-align: middle;" th:text="${s1[3]!=null ? s1[3] : '-'}"></td> 
					 <td style="vertical-align: middle;" th:text="${s1[4]!=null ? s1[4] : '-'}"></td>
					<td style="vertical-align: middle;" th:text="${s1[5]!=null ? s1[5] : '-'}"></td>
					<td style="vertical-align: middle;" th:text="${s1[6]!=null ? s1[6] : '-'}"></td>
			</tr>
		</tbody>
	</table>

</div>

<input type="hidden" th:value="${loginid}" id="lginid">
<script th:src="@{js/sweetalert.min.js}"></script>

<script src="js/header.js"></script>
<script>
function goback() {
     window.location = "miscellaneous";
     
     }   
     	
     	function feedbckoffshow(){
     	$("#feedbackdcallfilesdiv").hide();
     	$("#feedbackofficersdiv").show('slow');
     	
     	}
		
		function feedbackdcallfileshow(){
		$("#feedbackdcallfilesdiv").show('slow');
     	$("#feedbackofficersdiv").hide();
		}
		
		
	
	
	
	$("#feedbacksitetab").dataTable({
		"processing": true,
		"paging": true,
		"ordering": false,
		//"dom": 'Bfrtip',
		//buttons: ['excel', 'pdf', 'print']
		"dom": '<"pull-left"Bl>frtip',
		buttons: [{extend: "excel", text: '<i>EXCEL</i>',
		  exportOptions: {
						format: {
        					header: function ( data, column ) {
						if ( column == 3 ) 
        					return "RATINGS"
        				else	
        					return data; }}},
		
				   className: 'btn btn-primary mb-3',
				   title:'FPO IMPORT APPLICATION - ICES',
					filename:' Officers Feedback History ',
					message:'  Officers Feedback History @ ' + sitecode + '\n\r' + datetime, 
					},
				//pdf
    			  {extend: 'pdf',
    			    exportOptions: {
						format: {
        					header: function ( data, column ) {
						if ( column == 3 ) 
        					return "RATINGS"
        				else	
        					return data; }}},
    			  
				    text:'<i>PDF</i>',
				    pageSize: 'A4',
					watermark:'fpo',
                    className: ' btn btn-success mb-3 ',				
				    orientation: 'landscape',
				    
		   		    customize: function(doc, header) {
		   		    // doc.content[1].table.widths = Array(doc.content[1].table.body[0].length + 1).join('*').split('');
		   		    doc.content[1].table.widths = ['20%','20%','20%','20%','20%'];
				   	 doc.defaultStyle.alignment = 'center'
					 //doc.styles.tableHeader.fillColor='#ADD8E6',
					 doc.styles.tableHeader = {
        						color: '#2D1D10',
								fillColor:'#ADD8E6',
        						fontSize: '10',
        						alignment: 'center'
    						},
					doc.content.splice(1, 0,{
					text: [{text:' Date:'+ datetime, bold: true,
					alignment: 'right',
					fontSize: 7,
					//margin:[0,20,0,20],
					//watermark:'fpo', 
					},],});
					doc.content.splice(1, 0,{
          			text: [{text:' SSO ID: ' + empid, bold: true,
					alignment: 'left',
					fontSize: 7,
					//margin:[0,0,90,20],
					//watermark:'fpo', 
					},],}); 
					//doc.style.tableHeader		
					doc.defaultStyle.fontSize = 5;
					doc.styles.title.bold=true;
					doc.styles.title.fontSize=15;
					doc.styles.title.alignment="center",
					doc.styles.message.fontSize = 9;
					doc.styles.message.bold=true;
					//doc.styles.message.alignment = "right";
					doc.styles.tableHeader.fontSize= 5
					doc.styles.tableHeader.bold=true;
					doc['footer']=(function(page, pages) {
							return {
								columns: ['',{
								alignment: 'right',
										text: ['Page  ',{ text: page.toString(), italics: true,fontSize:7},'  of ',
											{ text: pages.toString(), italics: true,fontSize:6 }],italics: true, fontSize:6  }],
										margin: [15, 0]}});
    		        },
			title: 'FPO IMPORT APPLICATION - ICES'+
							'\n\r'+'Officers Feedback History  @ ' + sitecode,
           			//message: empid,
					//message:datetime, 
					filename:'Officers Feedback History  ',

     },
			//Print
		         {extend: "print" ,
		           exportOptions: {
						format: {
        					header: function ( data, column ) {
						if ( column == 3 ) 
        					return "RATINGS"
        				else	
        					return data; }}},
		         
				  className: 'btn btn-danger mb-3',
				  title: 'FPO IMPORT APPLICATION - ICES',
			      text: '<i>PRINT</i>',
				  message:' Officers Feedback History  @ ' + sitecode + '\n\r' + datetime ,
					filename:'Officers Feedback History ',
					customize: function ( win ) {
				
						$(win.document.body).css( 'font-size', '8pt' );
						$(win.document.body)
						.addClass( 'compact' )
						.find( 'table' ).css( 'font-size', 'inherit' );
                        //alert("cms here");
						},}],
						initComplete: function() {
      this.api().columns([3]).every(function() {
        var column = this;
        var coldata = column[0];
        if (coldata == 3) {
          var select = $('<select style="background-color: #63cfe0; font-weight: 700"><option value="">RATINGS</option></select>')
            .appendTo($(column.header()).empty())
            .on('change', function() {
              var val = $.fn.dataTable.util.escapeRegex($(this).val());
              column.search(val ? '^' + val + '$' : '', true, false).draw();
            });
          column.data().unique().sort().each(function(d, j) {
            select.append('<option value="' + d + '">' + d + '</option>');
          });
        }
      });

      $("#feedbacksitetab_filter").append('<button type="button" class="btn btn-info" id="clear" style="margin-left: 15px;margin-bottom: 5px;">Clear</button>');
      $('#clear').on('click', function() {
        $('#feedbacksitetab_filter input[type="search"]').val('').trigger('input');
        var table = $('#feedbacksitetab').DataTable();
        table.search('').draw();
      });
    }
		
		
	});
           
           
           
           
           
        $("#feedbackdcallsitetab").dataTable({
		"processing": true,
		"paging": true,
		"ordering": false,
		//"dom": 'Bfrtip',
		//buttons: ['excel', 'pdf', 'print']
		"dom": '<"pull-left"Bl>frtip',
		buttons: [{extend: "excel", text: '<i>EXCEL</i>',
		  exportOptions: {
						format: {
        					header: function ( data, column ) {
						if ( column == 6 ) 
        					return "RATINGS"
        				else	
        					return data; }}},
		
				   className: 'btn btn-primary mb-3',
				   title:'FPO IMPORT APPLICATION - ICES',
					filename:' Users Feedback(Through Link) History ',
					message:'  Users Feedback(Through Link) History @ ' + sitecode + '\n\r' + datetime, 
					},
				//pdf
    			  {extend: 'pdf',
    			    exportOptions: {
						format: {
        					header: function ( data, column ) {
						if ( column == 6 ) 
        					return "RATINGS"
        				else	
        					return data; }}},
    			  
				    text:'<i>PDF</i>',
				    pageSize: 'A4',
					watermark:'fpo',
                    className: ' btn btn-success mb-3 ',				
				    orientation: 'landscape',
				    
		   		    customize: function(doc, header) {
		   		    // doc.content[1].table.widths = Array(doc.content[1].table.body[0].length + 1).join('*').split('');
		   		    doc.content[1].table.widths = ['5%','13%','13%','13%','14%','14%','14%','14%'];
				   	 doc.defaultStyle.alignment = 'center'
					 //doc.styles.tableHeader.fillColor='#ADD8E6',
					 doc.styles.tableHeader = {
        						color: '#2D1D10',
								fillColor:'#ADD8E6',
        						fontSize: '10',
        						alignment: 'center'
    						},
					doc.content.splice(1, 0,{
					text: [{text:' Date:'+ datetime, bold: true,
					alignment: 'right',
					fontSize: 7,
					//margin:[0,20,0,20],
					//watermark:'fpo', 
					},],});
					doc.content.splice(1, 0,{
          			text: [{text:' SSO ID: ' + empid, bold: true,
					alignment: 'left',
					fontSize: 7,
					//margin:[0,0,90,20],
					//watermark:'fpo', 
					},],}); 
					//doc.style.tableHeader		
					doc.defaultStyle.fontSize = 5;
					doc.styles.title.bold=true;
					doc.styles.title.fontSize=15;
					doc.styles.title.alignment="center",
					doc.styles.message.fontSize = 9;
					doc.styles.message.bold=true;
					//doc.styles.message.alignment = "right";
					doc.styles.tableHeader.fontSize= 5
					doc.styles.tableHeader.bold=true;
					doc['footer']=(function(page, pages) {
							return {
								columns: ['',{
								alignment: 'right',
										text: ['Page  ',{ text: page.toString(), italics: true,fontSize:7},'  of ',
											{ text: pages.toString(), italics: true,fontSize:6 }],italics: true, fontSize:6  }],
										margin: [15, 0]}});
    		        },
			title: 'FPO IMPORT APPLICATION - ICES'+
							'\n\r'+'Users Feedback(Through Link) History  @ ' + sitecode,
           			//message: empid,
					//message:datetime, 
					filename:'Users Feedback(Through Link) History  ',

     },
			//Print
		         {extend: "print" ,
		           exportOptions: {
						format: {
        					header: function ( data, column ) {
						if ( column == 6 ) 
        					return "RATINGS"
        				else	
        					return data; }}},
		         
				  className: 'btn btn-danger mb-3',
				  title: 'FPO IMPORT APPLICATION - ICES',
			      text: '<i>PRINT</i>',
				  message:' Users Feedback(Through Link) History  @ ' + sitecode + '\n\r' + datetime ,
					filename:'Users Feedback(Through Link) History ',
					customize: function ( win ) {
				
						$(win.document.body).css( 'font-size', '8pt' );
						$(win.document.body)
						.addClass( 'compact' )
						.find( 'table' ).css( 'font-size', 'inherit' );
                        //alert("cms here");
						},}],
						initComplete: function() {
      this.api().columns([6]).every(function() {
        var column = this;
        var coldata = column[0];
        if (coldata == 6) {
          var select = $('<select style="background-color: #63cfe0; font-weight: 700"><option value="">RATINGS</option></select>')
            .appendTo($(column.header()).empty())
            .on('change', function() {
              var val = $.fn.dataTable.util.escapeRegex($(this).val());
              column.search(val ? '^' + val + '$' : '', true, false).draw();
            });
          column.data().unique().sort().each(function(d, j) {
            select.append('<option value="' + d + '">' + d + '</option>');
          });
        }
      });

      $("#feedbackdcallsitetab_filter").append('<button type="button" class="btn btn-info" id="clear12" style="margin-left: 15px;margin-bottom: 5px;">Clear</button>');
      $('#clear12').on('click', function() {
        $('#feedbackdcallsitetab_filter input[type="search"]').val('').trigger('input');
        var table = $('#feedbackdcallsitetab').DataTable();
        table.search('').draw();
      });
    }
		
		
	});   
</script>
</html>