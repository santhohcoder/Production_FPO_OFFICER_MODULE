<!DOCTYPE html>
<html lang="en">

<head lang="en" th:replace="header :: header"></head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
	</head>
<style>
#overlay {
   position: fixed;
   left: 0%;
   top: 0%;
   z-index: 9999;
    width: 100%;
    background: rgba(255, 255, 255, .7);
    height: 100%;
        }
  #loader {
    position: fixed;
    display: block;
     left: 50%;
     top: 48%;
     z-index: 9999;
     width: 100%;
      height: 100%;
      background-image: url(images/report/loader.gif);
     background-repeat: no-repeat;
     margin: -77px 0 0 -75px;
        }
   .nav-pills .nav-link{
        color: #000;
        }
.nav-pills .nav-link.active{
	background-color: #0a3052;
	color:#fff;
}
</style>

<body>
<div id="overlay" style="display: none;">
        <div id="loader">
        <div style="font-size: 20px; padding-top:5%"><b>Please wait...</b>
</div>   </div> </div>
<div align=left style="margin-left: 1%; margin-right: 1%">
			<button type="button" class="btn btn-info" onclick="goback()" style="line-height: 16px;background-color: darkred;border-color: darkred;">Back
			</button>
		</div>
<h3 style ="font-size: 19px; margin-left: 2%;">Dashboard> Site Management>Add/Activate FPO Site</h3>
<h3 style="text-align : center; color: #1616e0">NATIONAL SYSTEM ADMINISTRATOR (PNA)</h3>
 <!--  <div style ="font-weight: bold; margin-top: 50px; text-align: center;font-family: times new roman;background: deepskyblue;"><h2>Add/Activate FPO Site </h2></div>  -->
<!-- <div style ="display: flex;" >
   <div class="site_box_add " id="addSt" style ="display:inline-block;margin-block: auto; background-color:  #dc4545;margin-left: 15%; border: 2px; text-align: center;border-radius: 1.5em; color: white; padding: 30px; width: 25%;margin-top: 3%;"><h2 class ="box-font-style" ><a style ="color: white;"th:href="@{fpositeadd}">Add FPO Site</a></h2></div>
  <div class="site_box_edit" style ="display:inline-block;margin-block: auto; background-color: #9c27b0; margin-left: 19%; border: 2px; text-align: center; color: white;border-radius: 1.5em; padding: 30px; width: 25%; margin-top: 3%;"><h2 class ="box-font-style"  ><a style ="color: white;" th:href="@{activatesiteView}">Activate FPO Site</a></h2></div>
</div> -->



<ul class="nav nav-pills" role="tablist" style="border: 2px solid;border-radius: 7px;margin:20px;">
        <li class="nav-item"  onclick="addfposite()" style="width: 50%;text-align: center; font-size:1.5rem; font-weight:700">
        <a class="nav-link active show" data-toggle="pill" href="javascript:;">ADD FPO SITE</a>
      </li>
      <li class="nav-item"  onclick="activatefposite()" style="width: 50%;text-align: center;font-size:1.5rem; font-weight:700" value="0">
        <a class="nav-link" data-toggle="pill" href="javascript:;">ACTIVATE FPO SITE</a>
      </li>
        </ul>

        <!-- to add new fpo site -->

<div id="fposite_adding" class="" style="    display: flex; align-items: center; justify-content: center; flex-direction: column;">
<!--  <div style ="font-weight: bold; margin-top: 2%; text-align: center; padding-left: 100px; font-family: times new roman;background: deepskyblue;"><h4>ADD FPO SITE</h4></div><br> -->
 <input type="hidden" id="sitename">
  <input type="hidden" id="statename">
 <input type="hidden" id="cityname">
 <input type="hidden" id="clussite">
  <div class="row" style=" margin-top: 1%;     margin-left: -30px;">
				<label class="control-label col-sm-1" for="SiteCode" style="font-weight: 600; display: contents;">Select FPO Site<span style="color: red">*</span>:</label>
				<div class="col-sm-2 dropdown">
					<select class="form-control selsite" style="width: 310px;">
						<option>--Select FPO Sites--</option>
							<div th:each="sitestate,iter : ${fpolistsite}">
							<option th:text="${sitestate}" id="userstecde"></option>
						</div>
						</select>
						<div class="invalid-feedback"></div>
				</div>
			</div> 
			
				<div style="margin-top: 1%">
		
				
				<div class="row " style="text-align: end; margin-bottom: 1rem; margin-left: 171px;">
					<label class="control-label col-sm-1 " style="font-weight: 600; display: contents;">Site Code<span style="color: red">*</span>:</label>
					<div class="col-sm-2">
						<input type="text" id="sitecd" class="form-control"
							style="width: 310px" maxlength="6" placeholder="Enter Name">
							<div class="invalid-feedback"></div>
					</div>
				</div>
			

				<div class="form-group row" style="text-align: end; margin-bottom: 1rem; margin-left: 175px;">
					<label class="control-label col-sm-1 " style="font-weight: 600; display: contents;">Site
						Type<span style="color: red">*</span>:
					</label>
					<div class="col-sm-2">
						<input type="text" id="sitetype" class="form-control"
							 style="width: 310px" maxlength="10" placeholder="Enter Site Type">
							<div class="invalid-feedback"></div>
					</div>
				</div>
			
					
				<div  class="form-group row"
					style=" margin-top: 1%; text-align: end; margin-left: 156px;">
					<label class="control-label col-sm-1"
						style="font-weight: 600;display: contents; margin-top: 1px">State Name<span style="color: red">*</span>:
					</label>
					<div class="col-sm-2 dropdown">
					<select class="form-control selstate"   
						style="width: 310px;">
						<option>--Select State--</option>
							<div th:each="sitestate,iter : ${siteCodeList}">
							<option th:text="${sitestate[0]}" id="statename"></option>
						</div>
						</select>
						<div class="invalid-feedback"></div>
				</div>
				</div>
				
				
				
				
				<div class="form-group row" style="justify-content: center;     margin-left: -6px;">
					<label class="control-label col-sm-1 " style="font-weight: 600; display: contents;">Clustered:
					</label>
					<div class="col-sm-5"  style="gap: 15px;">
					<input type="checkbox"  id="clus" width="30px" height="30px"> Note: Check if the site is required to be clustered. Otherwise leave blank / uncheck the box 
							<div class="invalid-feedback"></div>
					</div>
				</div>
				
				<div id="clusdiv" class="form-group row" style="justify-content: center; margin-top: 1%; margin-left: -280px; text-align: end;display:none">
				<label class="control-label col-sm-1" for="SiteCodem" style="font-weight: 600;padding-left: 33px; display: contents;">Select FPO Site with which<br> it is to be clustered<span style="color: red">*</span>:</label>
				<div class="col-sm-2 dropdown">
					<select class="form-control selsitem"   id="selsitem"
						style="margin: 1%; width: 310px;">
						<option>--Select FPO Sites with which is to be clustered--</option>
						</select>
						<div class="invalid-feedback"></div>
				</div>
			</div> 
				
				<div class="form-group row " style="margin-top: 1%; text-align: end; margin-left: 178px;">
					<label class="control-label col-sm-1 " style="font-weight: 600; display: contents;">Remarks<span style="color: red">*</span>:
					</label>
					<div class="col-sm-2"> 
						<input type="text" id="rmks" class="form-control"  onkeyup="EnableDisable1(this)"
							style="width: 310px;" placeholder="Enter Remarks">
							<div class="form-group row " style=" text-align: start;font-size: 12px;">
<label style="white-space: nowrap;" class="lab_txt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(min 6 characters)</label></div>
							<div class="invalid-feedback"></div>
					</div>
				</div>
			</div>
			
 

<div style="    display: flex;
    align-items: center;
    justify-content: center;
    padding-left: 330px; margin-top: -2rem;">
 <button type="submit" id="siteadd" class="btn btn-success" >Submit</button>
	
</div>

<!-- 			 <div class="col-md-12" style="text-align: end;
			    padding-right: 72px;">
			    <div class="col-md-3"></div>
			    <div class="col-md-6" style=" margin-left: 295px;">
			 <button type="submit" id="siteDetails" class="btn btn-success" >Submit</button>
			</div>
			<div class="col-md-3"></div>
			</div> -->
 <!-- Do you want to add site popup -->
				<div class="modal fade" id="addsitepopup" tabindex="-1"
					role="dialog" data-backdrop="static" data-keyboard="false"
					aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog modal-dialog-centered" role="document">
						<div class="modal-content">
							<div class="modal-header"></div>
							<div class="modal-body">
								<h4 align="center">Do you want to Add FPO site.</h4>
							</div>
							<div class="modal-footer">
								<button type="button" data-dismiss="modal" id="noadd"
									class="btn btn-danger" style="margin-right: 366px;">No</button>
								<button type="button" data-dismiss="modal" id="siteaddconf"
									class="btn btn-success">Yes</button>
							</div>
						</div>
					</div>
				</div>
				
				
				<div class="modal fade" id="cl-sites" tabindex="-1"
					role="dialog" data-backdrop="static" data-keyboard="false"
					aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog modal-dialog-centered" role="document">
						<div class="modal-content">
							<div class="modal-header"></div>
							<div class="modal-body">
								<h4 align="center">Do you want to make this site as Clustered site. If Yes, then need to choose, with which site, this site is to be clustered.</h4>
							</div>
							<div class="modal-footer">
								<button type="button" data-dismiss="modal" id="noclus"
									class="btn btn-danger" style="margin-right: 366px;">No</button>
								<button type="button" data-dismiss="modal" id="yesclus"
									class="btn btn-success">Yes</button>
							</div>
						</div>
					</div>
				</div>

				<!-- Site has been already added -->
				<div class="modal fade" id="siteaddalrdy" tabindex="-1"
					role="dialog" data-backdrop="static" data-keyboard="false"
					aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog modal-dialog-centered" role="document">
						<div class="modal-content">
							<div class="modal-header"></div>
							<div class="modal-body">
								<h4 align="center">This Site already exist.</h4>
							</div>
							<div class="modal-footer">
								<button type="button" data-dismiss="modal" id="siterefresh"
									class="btn btn-success">Ok</button>
							</div>
						</div>
					</div>
				</div>

				<!-- Site added popup -->
				<div class="modal fade" id="siteaddsucces" tabindex="-1"
					role="dialog" data-backdrop="static" data-keyboard="false"
					aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog modal-lg modal-dialog-centered"
						role="document">
						<div class="modal-content">
							<div class="modal-header"></div>
							<div class="modal-body">
								<h4 align="center">
									The FPO Site Name & Code has been successfully added as a FPO
									Site. To activate this site go-to 'Activate FPO Site' under
									<sapn>'Site Management' functionality</sapn>
								</h4>
							</div>
							<div class="modal-footer">
								<!-- <button type="button" data-dismiss="modal" class="btn btn-danger" style="margin-right: 670px;">No</button> -->
								<button type="button" data-dismiss="modal" id="fpositesucc"
									class="btn btn-success">Ok</button>
							</div>
						</div>
					</div>
				</div>
			
	
	<input type="hidden" th:value="${loginid}" id="lginid">
</div>


  <!-- Activating Fpo Site Contents -->
  
  <div id="activating_fposite" class="" style="display:none; margin:20px;">
  
<div style="margin-top: 10PX; padding-left: 2%;
    padding-right: 2%">
		<table id = "mytable" class="table table-bordered table-striped"
			style="font-size: 14px; text-align: center;">

			<thead>
				<tr style="background-color: #63cfe0">
					<th scope="col" style="width: 37px">Sl.No.</th>
					<th scope="col">FPO Site Name</th>
					<th scope="col">Site Code</th>
					<th scope="col">State</th>
					<th scope="col">Action</th>

				</tr>
			</thead>
			<tbody>
				<tr valign="middle" class="rowDis" 
					th:each="FpoSite,iter : ${statelist}">
					<td style="vertical-align: middle;" th:text="${iter.index+1}"></td>
					<td  style="vertical-align: middle;" th:text="${FpoSite[0]}"></td>
					<td  style="vertical-align: middle;" th:text="${FpoSite[1]}"></td>
					<td style="vertical-align: middle;" th:text="${FpoSite[2]}"></td>
					<td class="sites" align="center" style="display: flex;justify-content: space-evenly;">
					<button onclick="siteactivate(this)" th:id="${FpoSite[1]}" th:value="${FpoSite[0]}" data-target="#activatesite" class="btn btn-success button-size">Activate</button> 	
					<button onclick="deletesite(this)" th:id="${FpoSite[1]}" th:value="${FpoSite[0]}" data-target="#deactivatesite" class="btn btn-danger button-size">Delete</button> 
					</td>
				</tr>
			</tbody>
		</table>
	</div>
	
	<div class="modal fade" id="deletesite" tabindex="-1" role="dialog"
		data-backdrop="static" data-keyboard="false"
		aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
		
			<div class="modal-content">
				<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLongTitle" align="center">Do you want to Delete</h5>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				
				<div class="modal-footer">
				<div class="col-6  d-flex justify-content-start">
					<button type="button" id="blcsiteclose" class="btn btn-danger"
						 data-dismiss="modal">No</button>
				</div>
				<div class="col-6 d-flex justify-content-end">
					<button id="delsite" type="submit" class="btn btn-success"
						data-dismiss="modal">YES</button>
				</div>
				</div>
			</div>
		</div>
	</div>
	
	
<div class="modal fade" id="activatesite" tabindex="-1" role="dialog"  data-backdrop="static" data-keyboard="false"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content">
					<div class="modal-header">
					</div>
					<div class="modal-body">
						<h4 align="center">Do you want to Activate this Fpo Site?</h4>
					</div>
					<div class="modal-footer">
						<button type="button" data-dismiss="modal" id="activeclose" class="btn btn-danger" style="margin-right: 366px;">No</button>
						<button type="button" id="activestefpo" class="btn btn-success" >Yes</button>
					</div>
				</div>
			</div>
		</div>
<!-- Activate site Reason -->

	<div class="modal fade" id="actstereas" tabindex="-1" role="dialog"
		data-backdrop="static" data-keyboard="false"
		aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
		
			<div class="modal-content">
				<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLongTitle" align="center">Please ensure Customs Postal Import is processed at this FPO site.<br>Please provide reasons for Activating this site.</h5>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">

					<div class="form-group">
						<label for="message-text" class="col-form-label">Record
							reason:</label>
						<textarea id="recordMsg" onkeyup="EnableDisable(this)"
							class="form-control activeresp"></textarea>
					</div>

				</div>
				<div class="modal-footer">
					<button type="button" id="blcsiteclose" class="btn btn-secondary"
						style="margin-right: 290px" data-dismiss="modal">Close</button>
					<button id="siteactve" type="submit" class="btn btn-primary"
						data-dismiss="modal">Activate Site</button>
				</div>
			</div>
		</div>
	</div>
  	
  	
  		<div class="modal fade" id="deleteSiteRe" tabindex="-1" role="dialog"
		data-backdrop="static" data-keyboard="false"
		aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
		
			<div class="modal-content">
				<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLongTitle" align="center">Please provide reasons for Deleting this site.</h5>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">

					<div class="form-group">
						<label for="message-text" class="col-form-label">Record
							reason:</label>
						<textarea id="recordMsg" onkeyup="EnableDisable(this)"
							class="form-control deleteresp"></textarea>
					</div>

				</div>
				<div class="modal-footer">
					<button type="button" id="blcsiteclose" class="btn btn-secondary"
						style="margin-right: 290px" data-dismiss="modal">Close</button>
					<button id="siteDelte" type="submit" class="btn btn-primary"
						data-dismiss="modal">Delete Site</button>
				</div>
			</div>
		</div>
	</div>
  
  
  </div>
  
  
  </body>
  
  
  <script>
  var sitecode_name= $("#sitecode").val();
	
	$('#mytable').DataTable({
		
	
	"processing": true,
		"paging": true,
		"ordering": false,
		"dom": '<"pull-left"Bl>frtip',
		
		buttons: [
			
				{extend: 'csvHtml5', text: '<i>EXCEL</i>',
				   className: 'btn btn-primary mb-3',
				   title:'FPO IMPORT APPLICATION - ICES',
					filename:'ACTIVATE FPO SITE',
					message:'ACTIVATE FPO SITE @ ' + sitecode_name + '\n\r'+datetimes,
					
						}, 
						
				{extend: 'pdf',
				    text:'<i>PDF</i>',
				    pageSize: 'A4',
                    className: ' btn btn-success mb-3 ',
					title: 'FPO IMPORT APPLICATION - ICES'+
							'\n\r'+'ACTIVATE FPO SITE @ ' + sitecode_name,
					filename:'ACTIVATE FPO SITE',
				     orientation: 'landscape',
					exportOptions: {
        				columns: [ 0,1,2,3,4],
						margin: true,
					
      						}, 
		   		     customize: function(doc, header) {
					doc.content[1].table.widths = ['5%','23%','24%','24%','24%'];
				   	 doc.defaultStyle.alignment = 'center'
					
					 doc.styles.tableHeader = {
        						color: '#2D1D10',
								fillColor:'#ADD8E6',
        						fontSize: '10',
        						alignment: 'center'
    						},
				
					doc.content.splice(1, 0,{
          			text: [{text:' SSO ID: '+empid, bold: true,
					alignment: 'left',
					fontSize: 7,
					margin:[0,90,0,20],
					
					},],});  
						doc.content.splice(1, 0,{
					text: [{text:' Date:'+datetimes, bold: true,
					alignment: 'right',
					fontSize: 7,
					margin:[0,90,0,20],
					
					},],});		
					doc.defaultStyle.fontSize = 5;
					doc.styles.title.bold=true;
					doc.styles.title.fontSize=15;
					doc.styles.title.alignment="center",
					doc.styles.message.fontSize = 9;
					doc.styles.message.bold=true;
					doc.styles.message.alignment = "left";
					doc.styles.tableHeader.fontSize= 6;
					doc.styles.tableHeader.bold=true;
					doc['footer']=(function(page, pages) {
							return {
								columns: ['',{
								alignment: 'right',
										text: ['Page  ',{ text: page.toString(), italics: true,fontSize:7},'  of ',
											{ text: pages.toString(), italics: true,fontSize:6 }],italics: true, fontSize:6  }],
										margin: [15, 0]}});
    		        },
				},
				
				
				 {extend: "print" ,
				  className: 'btn btn-danger mb-3',
				  title: 'FPO IMPORT APPLICATION - ICES',
			      text: '<i>PRINT</i>',
				 filename:'ACTIVATE FPO SITE',
					message:'ACTIVATE FPO SITE @ '+ sitecode_name + '\n\r' + datetimes ,
				customize: function ( win ) {
					console.log("sucess");
						$(win.document.body).css( 'font-size', '8pt' )
						$(win.document.body).find( 'table' ).css( 'font-size', 'inherit' );
						},}],
		
		"initComplete": function( settings ) {
	     $("#mytable_filter").append('<button type="button" class="btn btn-info" id="clear6" '+
			'style="margin-left: 15px;margin-bottom: 5px;">Clear</button>');
          $("#mytable_filter input[type='search']").attr('id', 'searchmytable');
		$('#clear6').click(function() {	
		document.getElementById("searchmytable").value=""
		var table = $('#mytable').DataTable();
		table.search('').draw();
	   })
    	}
	
});
</script>
  
  
  
 

<script src="js/fpositeadd.js"></script>
<script th:src="@{js/datatables.min.js}"></script>
<script src="js/fpoactivesite.js"></script>
 



<script>
  function goback() {
     window.location = "nsmHome";
 
     }
     
 function showLoader() {
	$("#overlay").css("display", "block");
	$('#overlay').height($("body").innerHeight());
}

function hideLoader() {
	setTimeout(function() {
		$("#overlay").css("display", "none");
	}, 500);
} 

function addfposite() {
			$("#activating_fposite").hide();
			$("#fposite_adding").show('slow');	
        }
        
        function activatefposite() {
			$("#fposite_adding").hide();
			$("#activating_fposite").show('slow');
        }   
</script>
<!-- <script src="js/addingSite.js"></script> -->

</html>