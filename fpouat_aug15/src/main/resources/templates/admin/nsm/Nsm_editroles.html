<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
.lsmtable.table.table-bordered.table-sm>tbody>tr>td {
	border: 1px solid #000000 !important;
}

a.nav-link {
	font-weight: bold;
	color: black;
	text-transform: uppercase;
	font-size: 20px;
}

.swal-button {
	        background-color: #35b935;
	        color:#fff;
	        box-shadow: none;
	    }
	    
	    .swal-button--cancel{
		    color:#fff;
		    background-color: #f14141;
		    box-shadow: none;
	    }
	    
	     .swal-button:not([disabled]):hover {
	        background-color: #35b935;
	        color:#fff;
	    }
	    
	    .swal-button--cancel:not([disabled]):hover {
		    color:#fff;
		    background-color: #f14141;
        }
        
        .swal-button:active {
        	background-color: #35b935;
	        color:#fff;
        }
        
        .swal-footer{
        	display: flex;
    		justify-content: space-around;
    		gap:250px;
    	}   

	.swal-button:focus {
        	outline: none !important;
        	box-shadow: none !important;
     	 }

/*.swal-button--cancel {
    color: #fff;
    background-color: red;
    margin-right: 280px;
}

.swal-button {
    background-color: #28a745;
    color: #fff;
    border: none;
    box-shadow: none;
    border-radius: 5px;
    font-weight: 600;
    font-size: 14px;
    padding: 10px 24px;
    margin: 0;
    cursor: pointer;}*/

.nav-pills .nav-link.active, .nav-pills .show>.nav-link {
	background: #0a3052 !important;
}

/* a:hover {
color: none !important;
} */
[type="checkbox"]:not(:checked), [type="checkbox"]:checked {
	position: absolute;
	left: -9999px;
}

[type="checkbox"]:not(:checked)+label, [type="checkbox"]:checked+label {
	position: relative;
	padding-left: 20px;
	cursor: pointer;
}

[type="checkbox"]:not(:checked)+label:before, [type="checkbox"]:checked+label:before
	{
	content: '';
	position: absolute;
	left: -5px;
	top: 5px;
	width: 20px;
	height: 20px;
	background: #fff;
	border-radius: 3px;
	box-shadow: inset 0 1px 3px rgb(86, 30, 30);
	border-radius: 46%;
	outline: none;
}

[type="checkbox"]:not(:checked)+label:after, [type="checkbox"]:checked+label:after
	{
	content: "\2713";
	position: absolute;
	top: 9px;
	left: -1px;
	font-size: 16px;
	line-height: 0.8;
	color: #fff;
	transition: all .5s;
	background-color: green;
	border-radius: 48%;
}

[type="checkbox"]:not(:checked)+label:after {
	opacity: 0;
	transform: scale(0);
}

[type="checkbox"]:checked+label:after {
	opacity: 1;
	transform: scale(1);
}

.card-text:last-child {
	margin-bottom: 1rem !important;
}

.card-body {
	padding: 0.5rem !important;
}

#overlay {
   position: fixed;
   left: 0%;
   top: 0%;
   z-index: 9999;
    width: 100%;
    background: rgba(255, 255, 255, .7);
    height: 100%;
        }
  #loader {
    position: fixed;
    display: block;
     left: 50%;
     top: 48%;
     z-index: 9999;
     width: 100%;
      height: 100%;
      background-image: url(images/report/loader.gif);
     background-repeat: no-repeat;
     margin: -77px 0 0 -75px;
        }
        
          .menuIconToggle:before {
       		display:none !important;
       }
       
       .menuIconToggle:after {
       		display:none !important;
       }
        
</style>
<head lang="en" th:replace="header :: header"></head>

<body>
<div id="overlay" style="display: none;">
        <div id="loader">
        <div style="font-size: 20px; padding-top:5%"><b>Please wait...</b>
</div>   </div> </div>

<div align=left style="margin-left: 1%; margin-right: 1%">
			<button type="button" class="btn btn-info" onclick="goback()" style="line-height: 16px;background-color: darkred;border-color: darkred;">Back
			</button>
		</div>
	
		<h3 style="font-size: 19px; margin-left: 2%;">Dashboard> Allocate
			Roles> Edit Roles</h3>
		<h3 style="color: #1616e0;text-align:center">NATIONAL
			SYSTEM ADMINISTRATOR (PNA)</h3>
	<div class="col-md-12 row">
	<!-- div class="col-md-1" style="margin-top: 1%; text-align: center;"><button class="btn btn-info" id="bcktoselrole">Back</button></div-->
	<div class="col-md-12 mt-2" style="text-align: center;">
		<h2 style="font-weight: 500;">Role Management</h2>
	</div></div>
	<ul class="nav nav-pills" role="tablist"
		style="width: 100%; border: 2px solid; border-radius: 7px; margin-bottom: 20px; margin-top: 20px;">
		<li class="nav-item" id="queryQueue"
			style="width: 50%; text-align: center;"><a class="nav-link"
			data-toggle="pill" onclick="Nsmalloctrole()" href="javascript:;">Allocation
				of roles</a></li>
		<li class="nav-item" id="otherqueues" onclick="Nsmrolehstry()"
			style="width: 50%; text-align: center;" value="0"><a
			class="nav-link active show" data-toggle="pill" href="javascript:;">Edit
				/ Remove roles</a></li>
	</ul>



	<div class="form-group editselrole row mt-2"
		style="font-weight: 500; justify-content: center; margin-right: 0%">
		<label class="control-label" for="State" style="font-size: 110%;padding-top:8px;">Select
			User:</label>
		<div class="col-sm-2">
			<select id="siteState" class="form-control userid" name="siteState"
				required="required">
				<option value="">--Select User--</option>
				<div th:each="Nsmroles,iter : ${getNsmuserid}">
					<option class="form-control" th:text="${Nsmroles[1]}" th:value="${Nsmroles[0]}"></option>
				</div>
			</select>
		</div>
	</div>
	<div class=row id="LSMUser" style="display: none">
		<div class="col-sm-3"></div>
		<div class="col-md-7" style="display: flex;align:center">
			<table width="80%">
				<thead>
					<tr style="background-color: #007bff40">
				<th scope="col" width="8%" style="font-size: larger;">&nbsp;&nbsp;&nbsp;&nbsp;SSOID:</th>
				<th scope="col" id="LsmSSid" width="15%"
					style="color: #0062cc; font-size: larger;"></th>
				<th scope="col" width="8%" style="font-size: larger;">&nbsp;&nbsp;NAME:</th>
				<th scope="col" width="16%" id="LsmNme"
					style="color: #0062cc; font-size: larger;"></th>
				<th scope="col" width="12%" style="font-size: larger;">DESIGNATION:</th>
				<th scope="col" id="LsmDes" width="13%"
					style="color: #0062cc; font-size: larger;"></th>
			</tr>
				</thead>
			</table>
		</div>
		<div class="col-sm-1">
			<button type="button" id="clearchckbox" class="btn btn-success">Remove
				All Roles</button>
		</div>
		<div class="col-sm-1 emprofile" style="display: none;text-align:center;align:right;"><button type="button" id="userprofile" class="btn btn-info">User Profile</button></div>
		<div class="row">
	<div  style="text-align:end;">
		<button type="button" id="Updatederles" class="btn btn-success" style="margin-right: 1rem;
    margin-left: 89rem;
    margin-top: 12px;">Save Changes</button>
	</div>
	<div  style="align:right;">
			<button type="button" id="CanceNsmbtn" class="btn btn-success" style="margin-top: 12px;">Cancel Changes</button>
		</div>	
	</div>
	</div>
	
	<div class="col-md-12 mt-2 row editroles"
		style="display: flex; justify-content: center;">
		<div class="col-md-4 editacadminrole " style="display: none">
			<div style="display: flex; justify-content: center;">
				<font size=5 color="black"><strong>ADMIN ROLES</strong></font>
			</div>
			
			<div class="editadminrole"
				style="list-style-type: none; padding-right: 50px; padding-left: 50px;"></div>
		</div>
		
		<div class="col-md-4 editmiscellist" style="display: none">
			<div style="display: flex; justify-content: center;">
				<font size=5 color="black"><strong>MISCELLANEOUS
						ROLES</strong></font>
			</div>
			
			<div class="editmiscelroles"
				style="list-style-type: none; padding-right: 50px; padding-left: 50px;">
			</div>
		</div>
		
	
	</div>

	    <div class="submitbutn" style="display: none">
	    <div class="row">
	<div class="col-md-8" style="text-align:end;">
		<!-- <button type="button" id="Updatederles" class="btn btn-success">Save Changes</button> -->
	</div>
	<div class="col-md-2" style="align:right;">
			<!-- <button type="button" id="CanceNsmbtn" class="btn btn-success">Cancel Changes</button> -->
		</div>	
	</div>
	
	
	<!-- Want to write the code -->
	<div class="chkbxnote mt-2" style="display : none;"><h4 style="text-align : left; margin-left:2%;font-size:15px;"><b>Note:</b> Uncheck the boxes to remove / edit roles. </h4></div>
	<!--  <div class="submitbutn" style="display: none">
	
	
	<div class="col-md-9" style="justify-content: end; display: flex;">
		<button type="button" id="Updatederles" class="btn btn-success">View user profile</button>
	</div></div><br> -->

	<input type=hidden id="lsmCusite" th:value="${Nsmsitecde}" />
	<input type=hidden id="NsmOffid" th:value="${Nsmoffid}" />
    <input type=hidden id="couothrole" th:value="${anyothrole}" />
	<!-- Edit Assigned role Modal popup -->
	<div class="modal fade" id="rolecnfrm" tabindex="-1" role="dialog"
		data-backdrop="static" data-keyboard="false"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header"></div>
				<div class="modal-body">
					<h4 align="center" id="selectedroles"
						style="font-family: 'FontAwesome';"></h4>
				</div>
				<div class="modal-footer">
					<button type="button" id="notsure" data-dismiss="modal"
						class="btn btn-danger" style="margin-right: 366px;">No</button>
					<button type="button" data-dismiss="modal" id="addrole"
						class="btn btn-success">Yes</button>
				</div>
			</div>
		</div>
	</div>
	  
<!-- Remove role conform -->
	  <div class="modal fade" id="remverolecnfrm" tabindex="-1" role="dialog"
		data-backdrop="static" data-keyboard="false"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header"></div>
				<div class="modal-body">
					<h4 align="center" id="removerolespopup"
						style="font-family: 'FontAwesome';"></h4>
				</div>
				<div class="modal-footer">
					<button type="button" id="rolermvenotsure" data-dismiss="modal"
						class="btn btn-danger" style="margin-right: 366px;">No</button>
					<button type="button" data-dismiss="modal" id="cnfrmrmvearole"
						class="btn btn-success">Yes</button>
				</div>
			</div>
		</div>
	</div>
	
   
    <div class="modal fade" id="editroleremvecnfrmAO" tabindex="-1"
		role="dialog" data-backdrop="static" data-keyboard="false"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header"></div>
				<div class="modal-body">
					<h4 align="center"
						style="color: #c70b0b; font-family: 'FontAwesome'; transition: 0.5s;"
						id="blinkAO">Please confirm on the changes carried out</h4>
				</div>
				<div class="modal-footer">
					<button type="button" data-dismiss="modal"
						class="btn btn-danger" style="margin-right: 366px;" id="editnotsureAO">No</button>
					<button type="button" data-dismiss="modal" id="editcnfrmrolermvAO"
						class="btn btn-success">Yes</button>
				</div>
			</div>
		</div>
	</div>
	
	 <div class="modal fade" id="NSAmaxrole" tabindex="-1"
		role="dialog" data-backdrop="static" data-keyboard="false"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header"></div>
				<div class="modal-body">
					<h4 align="center"
						style="color: #c70b0b; font-family: 'FontAwesome'; transition: 0.5s;">Maximum
						of 3 users can be given for National System Administrator (PNA) role.
						Please remove one of the user from PNA role to allocate for any
						new user ID (of DG Systems Officer) which is mapped to INNSA5 .</h4>
				</div>
				<div class="modal-footer">
					<button type="button" id="NSArolelimit" data-dismiss="modal" 
						class="btn btn-success">OK</button>
				</div>
				</div>
			</div>
		</div>
		
	<div class="modal fade" id="NALnopopup" tabindex="-1"
		role="dialog" data-backdrop="static" data-keyboard="false"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header"></div>
				<div class="modal-body">
					<h4 align="center"
						style="color: #c70b0b; font-family: 'FontAwesome'; transition: 0.5s;"
						id="NALnorole">National Alert Role can be alloted only to DRI Officers. As National Systems Administrator (PNA) role is allotted, National Alert(NAL) role cannot be allotted.</h4>
				</div>
				<div class="modal-footer">
					<button type="button" data-dismiss="modal" id="NALnorole1"
						class="btn btn-success">OK</button>
				</div>
			</div>
		</div>
	</div>	
	
	
	<div class="modal fade" id="userprofileModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="overflow:auto;" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog modal-dialog-centered" role="document" style="width: auto; height: auto;max-width: 60%;">
            <div class="modal-content" >
                <div class="modal-header" >
				<h5  class="modal-title" id="userprofTitle" style="font-weight: bold;text-transform: uppercase;text-align:center">User Profile</h5>
                    <button type="button" class="close" onclick="closeuserprofModal()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>				
				</div>
				<div class="modal-body" id="userprofileBody">
                </div>

	            <div  align="right" style="margin-right:2%;margin-bottom:2%">
					<button type="button" class="btn btn-info" data-dismiss="modal" onclick="closeuserprofModal()" style="background-color:green">OK</button>
					</div>
				</div>
				</div>
			</div>
		

	
	
	<div class="modal fade" id="noPNApopup" tabindex="-1"
		role="dialog" data-backdrop="static" data-keyboard="false"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header"></div>
				<div class="modal-body">
					<h4 align="center"
						style="color: #c70b0b; font-family: 'FontAwesome'; transition: 0.5s;"
						id="NALnorole">National System Administrator (PNA) Role can be alloted only to DG System Officers. As National Alert Role (PAL) role is allotted, National System Administrator(PNA) role cannot be allotted.</h4>
				</div>
				<div class="modal-footer">
					<button type="button" data-dismiss="modal" id="PNAnorole1"
						class="btn btn-success">OK</button>
				</div>
			</div>
		</div>
	</div>	
	
	
	<div class="modal fade" id="noPNArmvpopup" tabindex="-1"
		role="dialog" data-backdrop="static" data-keyboard="false"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header"></div>
				<div class="modal-body">
					<h4 align="center"
						style="color: #c70b0b; font-family: 'FontAwesome'; transition: 0.5s;"
						id="NALnorole">National System Administrator (PNA) Role cannot be removed by self. Another officer who has National System Administrator (PNA) can remove this role</h4>
				</div>
				<div class="modal-footer">
					<button type="button" data-dismiss="modal" id="PNAnorole1"
						class="btn btn-success">OK</button>
				</div>
			</div>
		</div>
	</div>	
		
		
		<div class="modal fade" id="NSAminrole" tabindex="-1"
		role="dialog" data-backdrop="static" data-keyboard="false"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header"></div>
				<div class="modal-body">
					<h4 align="center"
						style="color: #c70b0b; font-family: 'FontAwesome'; transition: 0.5s;">Minimum
						one National System Administrator (PNA) role should be available to allot roles for others.
						Please  allocate PNA role to for any
						new user ID (of DG Systems Officer) which is mapped to INNSA5 and then uncheck this.</h4>
				</div>
				<div class="modal-footer">
					<button type="button" id="NSArolelimit1" data-dismiss="modal" 
						class="btn btn-success">OK</button>
				</div>
				</div>
			</div>
		</div>
		
		<div class="modal fade" id="ARPmaxrole" tabindex="-1"
		role="dialog" data-backdrop="static" data-keyboard="false"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header"></div>
				<div class="modal-body">
					<h4 align="center"
						style="color: #c70b0b; font-family: 'FontAwesome'; transition: 0.5s;">Maximum
						of 30 users can be given for (NRP) National Reports role.
						Please remove one of the user from NRP role to allocate for any
						new user ID (of DG Systems Officer) which is mapped to INNSA5 .</h4>
				</div>
				<div class="modal-footer">
					<button type="button" id="ARProlelimit" data-dismiss="modal" 
						class="btn btn-success">OK</button>
				</div>
				</div>
			</div>
		</div>		

</body>
<script src="js/lsmJS/Nsm_edit_role.js"></script>
<script>
          function goback() {
     window.location = "usermanagement";
     
     } 
     $(document).ready(function() {
	showLoader();
	hideLoader();
	});	
	
	
function showLoader() {
	$("#overlay").css("display", "block");
	$('#overlay').height($("body").innerHeight());
}

function hideLoader() {
	setTimeout(function() {
		$("#overlay").css("display", "none");
	}, 500);
}
     
     </script>      
</html>