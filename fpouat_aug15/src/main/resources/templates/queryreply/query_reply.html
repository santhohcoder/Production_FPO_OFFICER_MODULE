<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="author" content="Kodinger">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>One Time Registration</title>
    <link th:href="@{css/query_reply/bootstrap.min.css}" rel="stylesheet" type="text/css" />
    <link th:href="@{css/query_reply/font-awesome.min.css}" rel="stylesheet" type="text/css" />
</head>
<style>
    html,
    body {
        height: 100%;
    }

    body.my-login-page {
        background-color: #91c5ff;
        font-size: 14px;
        overflow-x: hidden;
    }

    .my-login-page .brand {
        width: 250px;
        /*height: 90px;*/
        overflow: hidden;
        border-radius: 50%;
        margin: 20px auto;
        /*box-shadow: 0 4px 8px rgba(0, 0, 0, .05);*/
        position: relative;
        z-index: 1;
    }
    
    .swal-button {
	        background-color: #35b935;
	        color:#fff;
	        box-shadow: none;
	    }
	    
	    .swal-button--cancel{
		    color:#fff;
		    background-color: #f14141;
		    box-shadow: none;
	    }
	    
	     .swal-button:not([disabled]):hover {
	        background-color: #35b935;
	        color:#fff;
	    }
	    
	    .swal-button--cancel:not([disabled]):hover {
		    color:#fff;
		    background-color: #f14141;
        }
        
        .swal-button:active {
        	background-color: #35b935;
	        color:#fff;
        }
        
        .swal-footer{
        	display: flex;
    		justify-content: space-around;
    		gap:250px;
    	}   

	.swal-button:focus {
        	outline: none !important;
        	box-shadow: none !important;
     	 }

    .card {
        background-color: #ffffff;
    }

.h2-row{
	    background-color: #d1ecf1;
    color: slategrey;
    font-family: monospace;
    font-weight: bold;
    padding: 0px 7px 0px 0px;
    width: 100%;
    margin: 0;
}


    .my-login-page .brand img {
        width: 100%;
    }

    .my-login-page .card-wrapper {
        max-width: 1500px;
    }

    .my-login-page .card {
        border-color: transparent;
        box-shadow: 0 4px 8px rgba(0, 0, 0, .05);
    }

    .my-login-page .card.fat {
        padding: 10px;
    }

    .my-login-page .card .card-title {
        margin-bottom: 30px;
    }

    .my-login-page .form-control {
        border-width: 2.3px;
    }

    .my-login-page .form-group label {
        width: 100%;
    }

    .my-login-page .btn.btn-block {
        padding: 12px 10px;
    }

    .my-login-page .footer {
        margin: 40px 0;
        color: #4a3939;
        text-align: center;
    }

    @media screen and (max-width: 425px) {
        .my-login-page .card-wrapper {
            width: 90%;
            margin: 0 auto;
        }
    }

    @media screen and (max-width: 320px) {
        .my-login-page .card.fat {
            padding: 0;
        }

        .my-login-page .card.fat .card-body {
            padding: 15px;
        }
    }

    .valid {
        border-color: #28a745;
        padding-right: calc(1.5em + .75rem);
        background-image: url(images/success.svg);
        background-repeat: no-repeat;
        background-position: center right calc(.375em + .1875rem);
        background-size: calc(.75em + .375rem) calc(.75em + .375rem);
    }

    .valid:focus {
        box-shadow: 0 0 0 0.2rem rgb(40 167 69 / 25%);
        border-color: #28a745;
    }

    .invalid {
        border-color: #dc3545;
        padding-right: calc(1.5em + .75rem);
        background-image: url(images/wrong.svg);
        background-repeat: no-repeat;
        background-position: center right calc(.375em + .1875rem);
        background-size: calc(.75em + .375rem) calc(.75em + .375rem);
    }

    .invalid:focus {
        box-shadow: 0 0 0 0.2rem rgb(220 53 69 / 25%);
        border-color: #dc3545;
    }

    .button {
        position: relative;
        padding: 8px 16px;
        outline: none;
        border-radius: 2px;
        cursor: pointer;
    }

    .button:active {
        background: #007a63;
    }

    .button__text {
        color: #ffffff;
        transition: all 0.2s;
    }

    .button--loading .button__text {
        visibility: hidden;
        opacity: 0;
    }

    .button--loading {
        pointer-events: none;
    }

    .button--loading::after {
        content: "";
        position: absolute;
        width: 16px;
        height: 16px;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        margin: auto;
        border: 4px solid transparent;
        border-top-color: #ffffff;
        border-radius: 50%;
        animation: button-loading-spinner 1s ease infinite;
    }

    @keyframes button-loading-spinner {
        from {
            transform: rotate(0turn);
        }

        to {
            transform: rotate(1turn);
        }
    }

    .mb-10 {
        margin-bottom: 10px;
    }

    .text-muted {
        font-size: 12px;
        margin-top: 5px;
    }

    .mandatory {
        color: red;
        width: 3% !important;
        margin: 0;
        padding: 0;
    }

    .card.fat {
        margin-bottom: 60px;
    }

    h1.title_text {
        width: 100vw;
        margin-left: calc(-50vw + 50%);
        text-align: center;
        margin-bottom: 20px;
        color: yellow;
    }

    ul.nav.nav-tabs.process-model.more-icon-preocess {
        list-style: none;
        padding: 0;
        position: relative;
        margin: 20px auto 20px;
        border: none;
        z-index: 0;
        max-width: 100%;
        padding-left: 9%;
    }

    .nav>li {
        position: relative;
    }

    .process-model li {
        display: inline-block;
        width: 18%;
        text-align: center;
        float: none;
        pointer-events: none;
    }

    ul.nav.nav-tabs.process-model.more-icon-preocess {
        list-style: none;
        padding: 0;
        position: relative;
        margin: 20px auto 20px;
        border: none;
        z-index: 0;
        max-width: 100%;
        padding-left: 9%;
    }

    .process-model li.active a,
    .process-model li.active a:hover,
    .process-model li.active a:focus,
    .process-model li.visited a,
    .process-model li.visited a:hover,
    .process-model li.visited a:focus {
        color: #bd2130;
    }

    .process-model li a {
        padding: 0;
        border: none;
        color: #000000;
    }

    .process-model li {
        display: inline-block;
        width: 25%;
        text-align: center;
        float: none;
    }

    ul.nav.nav-tabs.process-model.more-icon-preocess {
        list-style: none;
        padding: 0;
        position: relative;
        margin: 20px auto 20px;
        border: none;
        z-index: 0;
        max-width: 100%;
    }

    .process-model li.active i,
    .process-model li.visited i {
        background: #fff;
        border-color: #bd2130;
    }

    .process-model li i {
        display: block;
        height: 68px;
        width: 68px;
        text-align: center;
        margin: 0 auto;
        background: #f5f6f7;
        border: 2px solid #e5e5e5;
        line-height: 65px;
        font-size: 30px;
        border-radius: 50%;
    }

    .process-model li.active a,
    .process-model li.active a:hover,
    .process-model li.active a:focus,
    .process-model li.visited a,
    .process-model li.visited a:hover,
    .process-model li.visited a:focus {
        color: #bd2130;
        text-decoration: none;
        cursor: default;
    }

    .process-model li a {
        padding: 0;
        border: none;
        color: #000000;
        text-decoration: none;
        cursor: default;
    }

    .process-model li.active p,
    .process-model li.visited p {
        font-weight: bold;
        color: #bd2130;
    }

    p {
        margin-top: 1rem;
        margin-bottom: 1rem;
        color: white;
    }

    .process-model li.visited::after {
        background: #bd2130;
    }

    .process-model li::after {
        background: #e5e5e5 none repeat scroll 0 0;
        bottom: 0;
        content: "";
        display: block;
        height: 4px;
        margin: 0 auto;
        position: absolute;
        right: -105px;
        top: 33px;
        width: 210px;
        z-index: -1;
        cursor: default;
    }

    .process-model li:last-child::after {
        width: 0;
    }

    #step-section {
        width: 100vw;
        margin-left: calc(-50vw + 50%);
    }

    #card-title-heading {
        text-transform: uppercase;
        text-align: center;
        font-weight: bold;
    }

    p.label-font {
        font-size: 13px;
        font-weight: bold;
        color: blue;
        text-transform: uppercase;
        margin-top: 2px;
        text-align: right;
    }

    .dcall-formgrp {
        width: 400px;
        margin-right: auto;
        margin-left: auto;
    }

    #screen1-card-title-heading {
        text-transform: uppercase;
        text-align: center;
        font-weight: bold;
        text-decoration: underline;
        cursor: pointer;
    }

    #screen1-card-title-heading:hover {
        color: blue;
    }

    #welcome {
        margin-top: 15px;
        text-transform: uppercase;
        text-align: center;
        font-size: 2rem;
    }

    .fs-i {
        font-style: italic;
    }

    .fw-bold {
        font-weight: bold;
    }

    #screen1 p {
        color: black;
        font-size: 15px;
        line-height: 2;
    }

    .sample-p {
        color: black;
        font-style: italic;
    }

    .sample-a {
        color: blue !important;
        cursor: pointer;
    }

    .sample-div {
        z-index: 3;
        display: none;
        padding-top: 100px;
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
    }

    .sample-topright {
        position: absolute;
        right: 0;
        top: 0;
    }

    .sample-topright:hover {
        color: #fff !important;
        background-color: #f44336 !important;
    }

    .sample-btn {
        border: none;
        display: inline-block;
        padding: 8px 16px;
        vertical-align: middle;
        overflow: hidden;
        text-decoration: none;
        text-align: center;
        cursor: pointer;
        white-space: nowrap;
        font-size: 35px;
    }

    .sample-zoom-content {
        margin: auto;
        background-color: #fff;
        position: relative;
        padding: 0;
        outline: 0;
        width: 600px;
    }

    .sample-zoom {
        animation: animatezoom 0.6s;
    }

    .icon-tag {
        font-size: 200px;
        margin-bottom: 3rem;
    }

    .process-model li.active i {
        zoom: 200%;
        position: relative;
        bottom: 15px;
    }

    .process-model li.active p {
        font-size: 20px;
    }

    div#procedure-div p {
        color: black;
        font-size: 20px;
    }

    div#procedure-div .modal-body {
        height: 450px;
        overflow: auto;
        padding-left: 50px;
        padding-right: 50px;
        text-align: justify;
    }


    .captcha {
        border-radius: 5px;
        color: black;
        display: flex;
        margin-bottom: 1rem;
    }

    @media screen and (max-width: 500px) {
        .captcha {
            flex-direction: column;
        }

        .text {
            margin: .5em !important;
            text-align: center;
        }

        .logo {
            align-self: center !important;
        }

        .spinner {
            margin: 2em .5em .5em .5em !important;
        }
    }

    .text {
        font-size: 20px;
        font-weight: 500;
        margin-right: 1em;
        margin-top: 21px;
    }

    .spinner {
        position: relative;
        width: 2em;
        height: 2em;
        display: flex;
        margin: 2em 1em;
        align-items: center;
        justify-content: center;
    }

    input[type="checkbox"] {
        position: absolute;
        opacity: 0;
        z-index: -1;
    }

    input[type="checkbox"]+.checkmark {
        display: inline-block;
        width: 2em;
        height: 2em;
        background-color: #fcfcfc;
        border: 2.5px solid #c3c3c3;
        border-radius: 3px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
    }

    input[type="checkbox"]+.checkmark span {
        content: '';
        position: relative;
        /*
	position:absolute;
	border-bottom:3px solid;
	border-right:3px solid;
	border-color:#029f56;*/
        margin-top: -3px;
        transform: rotate(45deg);
        width: .75em;
        height: 1.2em;
        opacity: 0;
    }

    input[type="checkbox"]+.checkmark>span:after {
        content: '';
        position: absolute;
        display: block;
        height: 3px;
        bottom: 0;
        left: 0;
        background-color: #029f56;
    }

    input[type="checkbox"]+.checkmark>span:before {
        content: '';
        position: absolute;
        display: block;
        width: 3px;
        bottom: 0;
        right: 0;
        background-color: #029f56;
    }

    input[type="checkbox"]:checked+.checkmark {
        animation: 2s spin forwards;
    }

    input[type="checkbox"]:checked+.checkmark>span {
        animation: 1s fadein 1.9s forwards;
    }

    input[type="checkbox"]:checked+.checkmark>span:after {
        animation: .3s bottomslide 2s forwards;
    }

    input[type="checkbox"]:checked+.checkmark>span:before {
        animation: .5s rightslide 2.2s forwards;
    }

    @keyframes fadein {
        0% {
            opacity: 0;
        }

        100% {
            opacity: 1;
        }
    }

    @keyframes bottomslide {
        0% {
            width: 0;
        }

        100% {
            width: 100%;
        }
    }

    @keyframes rightslide {
        0% {
            height: 0;
        }

        100% {
            height: 100%;
        }
    }

    .logo {
        display: flex;
        flex-direction: column;
        align-items: center;
        height: 100%;
        align-self: flex-end;
        margin: 0.5em 1em;
    }

    .logo img {
        height: 2em;
        width: 2em;
    }

    .logo p {
        color: #9d9ba7;
        margin: 0;
        font-size: 1em;
        font-weight: 700;
        margin: .4em 0 .2em 0;
    }

    .logo small {
        color: #9d9ba7;
        margin: 0;
        font-size: .8em;
    }

    @keyframes spin {
        10% {
            width: 0;
            height: 0;
            border-width: 6px;
        }

        30% {
            width: 0;
            height: 0;
            border-radius: 50%;
            border-width: 1em;
            transform: rotate(0deg);
            border-color: rgb(199, 218, 245);
        }

        50% {
            width: 2em;
            height: 2em;
            border-radius: 50%;
            border-width: 4px;
            border-color: rgb(199, 218, 245);
            border-right-color: rgb(89, 152, 239);
        }

        70% {
            border-width: 4px;
            border-color: rgb(199, 218, 245);
            border-right-color: rgb(89, 152, 239);
        }

        90% {
            border-width: 4px;
        }

        100% {
            width: 2em;
            height: 2em;
            border-radius: 50%;
            transform: rotate(720deg);
            border-color: transparent;
        }
    }

    #heading-logo-main h1.title_text {
        text-align: left;
    }
   #overlay {
   position: fixed;
   left: 0%;
   top: 0%;
   z-index: 9999;
    width: 100%;
    background: rgba(255, 255, 255, .7);
    height: 100%;
        }
  #loader {
    position: fixed;
    display: block;
     left: 50%;
     top: 48%;
     z-index: 9999;
     width: 100%;
      height: 100%;
      background-image: url(images/report/loader.gif);
     background-repeat: no-repeat;
     margin: -77px 0 0 -75px;
        } 
</style>

<body class="my-login-page">
<div id="overlay" style="display: none;">
        <div id="loader">
        <div style="font-size: 20px; padding-top:5%"><b>Please wait...</b>
</div>   </div> </div>
    <section class="h-100">
        <div class="container h-100">
            <div class="row justify-content-md-center h-100">
                <div class="card-wrapper">
                    <div id="heading-logo">
                        <div class="brand">
                            <img src="images/CBEC.png" alt="logo">
                        </div>
                        <h1 class="title_text" style="color: #334495;font-size: 3rem;">INDIAN CUSTOMS</h1>
                        <h1 class="title_text" style="color: #334495;font-size: 1.5rem;">WELCOME TO THE </h1>
                        <h1 class="title_text">POSTAL IMPORT - CUSTOMS QUERY REPLY &amp; DOCUMENT UPLOAD FACILITY</h1>
                    </div>
                    <div id="heading-logo-main" style="display: none;width: 110vw;margin-left: calc(-50vw + 90%);transition: margin-left 1s ease 0s;">
                        <div class="brand" style="width: 150px;">
                            <img src="images/CBEC.png" alt="logo">
                        </div>
                        <div>
                            <h1 class="title_text" style="color: rgb(51 68 149);font-size: 3rem;margin-top: 45px;margin-bottom: 0;padding-bottom: 0;">INDIAN CUSTOMS</h1>
                            <hr style="border-top: 1px solid;color: white;">
                            <h1 class="title_text" style="margin-top: 15px;font-size: 30px;">POSTAL IMPORT - CUSTOMS QUERY REPLY &amp; DOCUMENT UPLOAD FACILITY</h1>
                        </div>

                    </div>
                    <div class="card fat" th:if="${urlMissMatch || queryReplied || urlExpired}">
                        <div class="card-body" style="text-align: center;">
                            <i th:if="${urlMissMatch}" style="color:red;" class="fa fa-ban icon-tag" aria-hidden="true"></i>
                            <i th:if="${queryReplied}" style="color:#32bd21;" class="fa fa-thumbs-up icon-tag" aria-hidden="true"></i>
                            <i th:if="${urlExpired}" style="color:#ffc107;" class="fa fa-hourglass-end icon-tag" aria-hidden="true"></i>
                            <h1 th:if="${urlMissMatch}" style="text-transform: uppercase;">URL is not valid...Please check the URL.</h1>
                            <h1 th:if="${queryReplied}" style="text-transform: uppercase;">You already replied to the queries using this link.</h1>
                            <h1 th:if="${urlExpired}" style="text-transform: uppercase;">Url is expired.</h1>
                        </div>
                    </div>
                    <div class="card fat" id="screen1" style="background-color: #b9daff;" th:unless="${urlMissMatch || queryReplied || urlExpired}">
                        <div class="card-body" style="padding: 30px;padding-left: 178px;padding-right: 178px;">
                            <h4 class="card-title" onclick="showProcedure()" id="screen1-card-title-heading">CLICK HERE TO VIEW THE PROCEDURE OF QUERY REPLY AND UPLOAD OF DOCUMENTS FOR THE DOCUMENT CALL LETTER (D-CALL) RECEIVED BY THE RECIPIENT FROM INDIAN CUSTOMS FOR AN IMPORT POSTAL ARTICLE</h4>
                            <!-- <form method="POST" class="my-login-validation" novalidate="">
                                <div class="form-group">
                                    <p>This facility will handle the electronic query reply and document upload for personal imports in the FPO Import Application of Indian Customs EDI System.The following steps will be followed,
                                    </p>
                                    <p class="fs-i"><span class="fw-bold">Step 1. </span> On visiting the link (URL) provided in the Document Call (D-Call) letter, the recipient / addressee/ consignee must register themselves by giving their name (as available in the import article), their email ID and mobile number.
                                        (Note : The link is unique for each Article ID and is auto generated while sending DCALL letter. The link will be valid for 30 days, before which this URL is used for reply and submission of documents. Once Submitted, the link expires.)

                                    </p>
                                    <p class="fs-i"><span class="fw-bold">Step 2. </span>OTP will be sent to the email ID and Mobile number entered for registration. OTP will be valid for 10 minutes. Re-send OTP option is available.
                                        (Note : Further Clarification if any would be reached at this Email or Mobile no by the Department, hence correct and valid Email ID / Mobile No. of the recipient is to be provided)

                                    </p>
                                    <p class="fs-i"><span class="fw-bold">Step 3.</span>Once OTPs are validated, recipient has to enter the D-Call letter number, as in the Document Call letter received from Indian Customs.
                                    </p>
                                    <p class="fs-i"><span class="fw-bold">Step 4.</span>Once D-Call letter number is validated. Recipient can view the queries raised by the Indian Customs and they can enter their reply to the query. Upload of KYC document is mandatory in pdf. They can also upload the supporting documents in pdf as sought by Indian Customs. Each pdf document file size should not exceed 1 MB. Total uploaded Document File Size should not exceed 10 MB.
                                    </p>
                                    <p class="fs-i"><span class="fw-bold">Step 5.</span>Undertake and submit.
                                    </p>
                                </div>
                                <div style="width: 100%;text-align: center;"><button type="button" onclick="viewOneTimeRegister()" class="btn btn-success">Click Here to Enter</button></div>





                            </form> -->
                        </div>
                    </div>
                    <div class="card fat" id="screen2" th:unless="${urlMissMatch || queryReplied || urlExpired}" style="display:none;">
                        <div class="card-body">
                            <h4 class="card-title" id="card-title-heading">One Time Registration</h4>
                            <form method="POST" id="registerForm" class="my-login-validation" novalidate="">
                                <div class="form-group">
                                    <label for="name">Recipient Name<label class="mandatory">&nbsp;*</label></label> <input id="name" onchange="validateField(this)" type="text" class="form-control" name="name" placeholder="Enter Recipient Name" value="" required autofocus>
                                    <div class="invalid-feedback">Recipient Name is required</div>
                                    <p class="text-muted">(Note: Recipient Name should exactly match the KYC document being attached and the name in the Import Portal Article.(Refer D-Call Letter.))</p>
                                </div>

                                <div class="form-group">
                                    <label for="email">E-Mail Address<label class="mandatory">&nbsp;*</label></label> <input id="email" onchange="validateField(this)" type="email" class="form-control" name="email" placeholder="Enter E-mail Address" value="" required autofocus>
                                    <div class="invalid-feedback">E-mail Address is invalid</div>
                                </div>

                                <div class="form-group">
                                    <label for="name">Mobile Number<label class="mandatory">&nbsp;*</label></label> <input id="mobileNumber" onchange="validateField(this)" placeholder="Enter Mobile Number" onkeypress='return event.charCode >= 48 && event.charCode <= 57' type="text" class="form-control" maxlength=10 name="mobileNumber" value="" required autofocus>
                                    <div class="invalid-feedback">Mobile Number is required</div>
                                    <p class="text-muted">(Example : 98XXXXXX64)</p>
                                </div>

                                <div id="otpSection" style="display:none">
                                    <div class="form-group">
                                        <label for="emailOtp">Email OTP<label class="mandatory">&nbsp;*</label>
                                        </label> <input id="emailOtp" type="password" placeholder="Enter Email OTP" onchange="validateField(this)" class="form-control" name="emailOtp" required data-eye>
                                        <div class="invalid-feedback">Email OTP is required</div>
                                        <p class="text-muted">(Note: OTP expires in 5 mins. Regenerate OTP option will be available only after generated OTP expires.)</p>
                                    </div>

                                    <div class="form-group">
                                        <label for="mobileOtp">Mobile OTP<label class="mandatory">&nbsp;*</label>
                                        </label> <input id="mobileOtp" type="password" placeholder="Enter Mobile OTP" onchange="validateField(this)" class="form-control" name="mobileOtp" required data-eye>
                                        <div class="invalid-feedback">Mobile OTP is required</div>
                                        <p class="text-muted">(Note: OTP expires in 5 mins. Regenerate OTP option will be available only after generated OTP expires.)</p>
                                    </div>
                                    <div class="form-group"><a href="javascript:;" onclick="resendOtp(this)" class="float-right mb-10"> Resend OTP ? </a></div>
                                </div>

                                <div class="form-group m-0" style="text-align:center;">
                                    <button type="button" onclick="generateOtp(this)" class="button success btn btn-primary btn-block">
                                        <span class="button__text">Generate OTP</span></button>

                                </div>
                            </form>
                        </div>
                    </div>
                    <section id="step-section" th:unless="${urlMissMatch || queryReplied || urlExpired}" style="display:none;">
                        <div class="container">
                            <div class="row">
                                <div class="col-sm-12">
                                    <!-- design process steps-->
                                    <!-- Nav tabs -->
                                    <ul class="nav nav-tabs process-model more-icon-preocess" role="tablist">
                                        <li role="presentation" class="active"><a href="#discover" aria-controls="discover" role="tab" data-toggle="tab" class="" aria-selected="false"><i class="fa fa-sign-in" aria-hidden="true"></i>
                                                <p class="">One Time Registration</p>
                                            </a></li>
                                        <li role="presentation" class=""><a href="#strategy" id="dcallVerifyStep" aria-controls="strategy" role="tab" data-toggle="tab" class="" aria-selected="false"><i class="fa fa-file-pdf-o" aria-hidden="true"></i>
                                                <p>D-Call Letter Verification</p>
                                            </a></li>
                                        <li role="presentation" class=""><a href="#content" aria-controls="content" role="tab" data-toggle="tab" class="" aria-selected="false"><i class="fa fa-upload" aria-hidden="true"></i>
                                                <p>View Query, Reply & Upload Documents</p>
                                            </a></li>
                                        <li role="presentation" class=""><a href="#reporting" aria-controls="reporting" role="tab" data-toggle="tab" class="active show" aria-selected="true"><i class="fa fa-thumbs-o-up" aria-hidden="true"></i>
                                                <p>Undertake &amp; Submit</p>
                                            </a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </section>
                    <!-- <div class="footer">Copyright &copy; 2017 &mdash; Your
                        Company</div> -->
                </div>
            </div>
        </div>
    </section>

    <div id="dcallSample" class="sample-div" th:unless="${urlMissMatch || queryReplied || urlExpired}" onclick="this.style.display='none'">
        <span class="sample-topright sample-btn">&times;</span>
        <div class="sample-zoom sample-zoom-content">
            <img src="images/CBEC.png" style="width:100%">
        </div>
    </div>

    <div class="modal fade" id="procedure-div" style="top:280px;overflow:hidden;" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
        <div class="modal-dialog" role="document" style="max-width: 1000px;">
            <div class="modal-content">
                <div class="modal-body" style="background: #dff0ff;">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h5 class="modal-title" style="color: black;cursor: default;" id="screen1-card-title-heading">PROCEDURE OF QUERY REPLY AND UPLOAD OF DOCUMENTS FOR THE DOCUMENT CALL LETTER (D-CALL) RECEIVED BY THE RECIPIENT FROM INDIAN CUSTOMS FOR AN IMPORT POSTAL ARTICLE</h5>
                    <form method="POST" class="my-login-validation" novalidate="">
                        <div class="form-group">
                            <p>This facility will handle the electronic query reply and document upload for personal imports in the FPO Import Application of Indian Customs EDI System.The following steps will be followed,
                            </p>
                            <p class="fs-i"><span class="fw-bold">Step 1. </span> On visiting the link (URL) provided in the Document Call (D-Call) letter, the recipient / addressee/ consignee must register themselves by giving their name (as available in the import article), their email ID and mobile number.
                                (Note : The link is unique for each Article ID and is auto generated while sending DCALL letter. The link will be valid for 30 days, before which this URL is used for reply and submission of documents. Once Submitted, the link expires.)

                            </p>
                            <p class="fs-i"><span class="fw-bold">Step 2. </span>OTP will be sent to the email ID and Mobile number entered for registration. OTP will be valid for 10 minutes. Re-send OTP option is available.
                                (Note : Further Clarification if any would be reached at this Email or Mobile no by the Department, hence correct and valid Email ID / Mobile No. of the recipient is to be provided)

                            </p>
                            <p class="fs-i"><span class="fw-bold">Step 3.</span>Once OTPs are validated, recipient has to enter the D-Call letter number, as in the Document Call letter received from Indian Customs.
                            </p>
                            <p class="fs-i"><span class="fw-bold">Step 4.</span>Once D-Call letter number is validated. Recipient can view the queries raised by the Indian Customs and they can enter their reply to the query. Upload of KYC document is mandatory in pdf. They can also upload the supporting documents in pdf as sought by Indian Customs. Each pdf document file size should not exceed 1 MB. Total uploaded Document File Size should not exceed 10 MB.
                            </p>
                            <p class="fs-i"><span class="fw-bold">Step 5.</span>Undertake and submit.
                            </p>
                        </div>

                        <div class="captcha">
                            <div class="spinner">
                                <label>
                                    <input type="checkbox" onclick="displayNextScreen(this)">
                                    <span class="checkmark"><span>&nbsp;</span></span>
                                </label>
                            </div>
                            <div class="text">
                                I READ THE PROCEDURE TO BE FOLLOWED
                            </div>
                        </div>
                        <div id="nextPageBtn" style="display:none;width: 100%;text-align: center;"><button type="button" onclick="viewOneTimeRegister()" class="btn btn-success">Click Here to Enter</button></div>





                    </form>
                </div>
            </div>
        </div>
    </div>

    <script th:src="@{js/query_reply/jquery.min.js}"></script>
    <script th:src="@{js/query_reply/popper.min.js}"></script>
    <script th:src="@{js/query_reply/bootstrap.min.js}"></script>
    <script th:src="@{js/query_reply/sweetalert.min.js}"></script>
    <script type="text/javascript">
        'use strict';

        $(function() {

            $("input[type='password'][data-eye]").each(function(i) {
                var $this = $(this),
                    id = 'eye-password-' + i,
                    el = $('#' + id);

                $this.wrap($("<div/>", {
                    style: 'position:relative',
                    id: id
                }));

                $this.css({
                    paddingRight: 60
                });
                $this.after($("<div/>", {
                    html: 'Show',
                    class: 'btn btn-primary btn-sm',
                    id: 'passeye-toggle-' + i,
                }).css({
                    position: 'absolute',
                    right: 10,
                    top: ($this.outerHeight() / 2) + 8,
                    padding: '2px 7px',
                    fontSize: 12,
                    cursor: 'pointer',
                }));

                $this.after($("<input/>", {
                    type: 'hidden',
                    id: 'passeye-' + i
                }));

                var invalid_feedback = $this.parent().parent().find('.invalid-feedback');

                if (invalid_feedback.length) {
                    $this.after(invalid_feedback.clone());
                }

                $this.on("keyup paste", function() {
                    $("#passeye-" + i).val($(this).val());
                });
                $("#passeye-toggle-" + i).on("click", function() {
                    if ($this.hasClass("show")) {
                        $this.attr('type', 'password');
                        $this.removeClass("show");
                        $(this).removeClass("btn-outline-primary");
                        $("#passeye-toggle-" + i).text('Show');
                    } else {
                        $this.attr('type', 'text');
                        $this.val($("#passeye-" + i).val());
                        $this.addClass("show");
                        $("#passeye-toggle-" + i).text('Hide');
                    }
                });
            });

            $(".my-login-validation").submit(function() {
                var form = $(this);
                if (form[0].checkValidity() === false) {
                    //event.preventDefault();
                    event.stopPropagation();
                }
                form.addClass('was-validated');
            });
        });

        function validateField(obj) {
            var error = 0;
            if ($(obj).attr('name') == 'name') {
                if ($(obj).val().trim() == '') {
                    $(obj).next().show();
                    $(obj).next().text('Recipient Name is required')
                    $(obj).addClass('invalid');
                    $(obj).removeClass('valid');
                    error = error + 1;
                } else {
                    $.ajax({
                        url: "checkRecipientName?currentUrl=" + document.URL + "&name=" + $(obj).val().trim(),
                        type: "post",
                        async: false,
                        success: function(data) {

                            if (!data.status) {
                                $(obj).next().show();
                                $(obj).next().text('Name should match as in import postal article')
                                $(obj).addClass('invalid');
                                $(obj).removeClass('valid');
                                error = error + 1;
                            } else {
                                $(obj).next().hide();
                                $(obj).addClass('valid');
                                $(obj).removeClass('invalid');
                            }
                        },
                        error: function(rs, e) {
                            console.log(e);
                        }
                    });
                }
            } else if ($(obj).attr('name') == 'email') {
                if ($(obj).val().trim() == '') {
                    $(obj).next().show();
                    $(obj).next().text('Email is required')
                    $(obj).addClass('invalid');
                    $(obj).removeClass('valid');
                    error = error + 1;
                } else {
                    var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
                    if (!($(obj).val().match(mailformat))) {
                        $(obj).next().show();
                        $(obj).next().text('Email is invalid')
                        $(obj).addClass('invalid');
                        $(obj).removeClass('valid');
                        error = error + 1;
                    } else {
                        $(obj).next().hide();
                        $(obj).addClass('valid');
                        $(obj).removeClass('invalid');
                    }
                }
            } else if ($(obj).attr('name') == 'mobileNumber') {
                if ($(obj).val().trim() == '') {
                    $(obj).next().show();
                    $(obj).next().text('Mobile Number is required')
                    $(obj).addClass('invalid');
                    $(obj).removeClass('valid');
                    error = error + 1;
                } else {
                    if (!($(obj).val().length == 10)) {
                        $(obj).next().show();
                        $(obj).next().text('Mobile Number must be in length of 10 digits')
                        $(obj).addClass('invalid');
                        $(obj).removeClass('valid');
                        error = error + 1;
                    } else {
                        $(obj).next().hide();
                        $(obj).addClass('valid');
                        $(obj).removeClass('invalid');
                    }
                }
            } else if ($(obj).attr('name') == 'emailOtp') {
                if ($(obj).val().trim() == '') {
                    $(obj).next().show();
                    $(obj).next().text('Email OTP is required')
                    $(obj).addClass('invalid');
                    $(obj).removeClass('valid');
                    error = error + 1;
                } else {
                    if (!($(obj).val().length == 8)) {
                        $(obj).next().show();
                        $(obj).next().text('Email OTP must be in length of 8 digits')
                        $(obj).addClass('invalid');
                        $(obj).removeClass('valid');
                        error = error + 1;
                    } else {
                        $(obj).next().hide();
                        $(obj).addClass('valid');
                        $(obj).removeClass('invalid');
                    }
                }
            } else if ($(obj).attr('name') == 'mobileOtp') {
                if ($(obj).val().trim() == '') {
                    $(obj).next().show();
                    $(obj).next().text('Mobile OTP is required')
                    $(obj).addClass('invalid');
                    $(obj).removeClass('valid');
                    error = error + 1;
                } else {
                    if (!($(obj).val().length == 8)) {
                        $(obj).next().show();
                        $(obj).next().text('Mobile OTP must be in length of 8 digits')
                        $(obj).addClass('invalid');
                        $(obj).removeClass('valid');
                        error = error + 1;
                    } else {
                        $(obj).next().hide();
                        $(obj).addClass('valid');
                        $(obj).removeClass('invalid');
                    }
                }
            }
            return error;
        }

        function generateOtp(obj) {
            var error = 0;
            var respError = 0;
            respError = validateField("#name");
            error = error + respError;
            respError = validateField("#email");
            error = error + respError;
            respError = validateField("#mobileNumber");
            error = error + respError;
            if (error == 0) {
                obj.classList.toggle('button--loading');
                $.ajax({
                    url: "generateOtp?currentUrl=" + document.URL + "&name=" + $("#name").val().trim() + "&emailId=" + $("#email").val().trim() + "&mobileNo=" + $("#mobileNumber").val().trim(),
                    type: "post",
                    success: function(data) {
                        if (data.status) {
                            swal('Success!', "OTP Generated and sent to entered email Id and mobile number", 'success').then((value) => {
                                obj.classList.toggle('button--loading')
                                $("#otpSection").show("slow");
                                obj.lastChild.textContent = 'Submit';
                                obj.setAttribute('onclick', 'validateOtp()');
                                if ($("#otpSection").find('div.form-group').length == 2) {
                                    $("#otpSection").append('<div class="form-group"><a href="javascript:;" onclick="resendOtp(this)" class="float-right mb-10"> Resend OTP ? </a></div>');
                                }
                            });;
                        } else {
                            swal('OOPS!', "Failed to generate OTP!", 'error');
                        }
                    },
                    error: function(rs, e) {
                        swal('OOPS!', "Failed to generate OTP!", 'error');
                    }
                });
            }
        }

        function resendOtp(obj) {
            $("#otpSection").next().find('button').toggleClass('button--loading')
            $.ajax({
                url: "resendOtp?currentUrl=" + document.URL + "&name=" + $("#name").val().trim() + "&emailId=" + $("#email").val().trim() + "&mobileNo=" + $("#mobileNumber").val().trim(),
                type: "post",
                success: function(data) {
                    if (data.status) {
                        $("#otpSection").next().find('button').toggleClass('button--loading');
                        $(obj).closest('div').remove();
                        swal('Success!', "OTP resent to entered email Id and mobile number", 'success');
                    } else {
                        swal('OOPS!', "Failed to resend OTP!", 'error');
                    }
                },
                error: function(rs, e) {
                    swal('OOPS!', "Failed to resend OTP!", 'error');
                }
            });
        }

        function validateOtp() {
            var error = 0;
            var respError = 0;
            respError = validateField("#mobileOtp");
            error = error + respError;
            respError = validateField("#emailOtp");
            error = error + respError;
            if (error == 0) {
                $.ajax({
                    url: "validateOtp?currentUrl=" + document.URL + "&name=" + $("#name").val().trim() + "&mobileOtp=" + $("#mobileOtp").val().trim() + "&emailOtp=" + $("#emailOtp").val().trim(),
                    type: "post",
                    success: function(data) {
                        if (!data.isExpired) {
                            if (data.mobileStatus && data.emailStatus) {
                                swal('Success!', "One Time Registration Done Successfully !", 'success').then((value) => {
                                    $("#registerForm").html('<form method="POST" class="my-login-validation">' +
                                        '<div class="row"><p class="col-sm-1 label-font mt-3">Name :</p>' +
                                        '<div class="col-sm-3"><p style="font-weight: 700;color: black;">' + $("#name").val().trim() + '</p>' +
                                        '</div><p class="col-sm-1 label-font mt-3">Email :</p><div class="col-sm-3">' +
                                        '<p style="font-weight: 700;color: black;">' + $("#email").val().trim() + '</p></div>' +
                                        '<p class="col-sm-2 label-font mt-3">Mobile Number :</p>' +
                                        '<div class="col-sm-2"><p style="font-weight: 700;color: black;">' + $("#mobileNumber").val().trim() + '</p></div></div>' +
                                        '<div class="form-group dcall-formgrp">' +
                                        //'<label for="dcallNumber">D-Call Letter Number<label class="mandatory">&nbsp;*</label></label>' +
                                        '<input id="dcallnumber" type="text" class="form-control " name="dcallnumber" placeholder="Enter D-Call Letter Number">' +
                                        '<div class="invalid-feedback">D-Call Letter Number is required</div><p class="sample-p">Sample D-Call Letter Number. <a onclick="showSample()" class="sample-a">Click Here</a></p></div><div class="form-group dcall-formgrp" ' +
                                        'style="text-align:center;"><button type="button" onclick="validateDCallNumber(this)" class="button success ' +
                                        'btn btn-primary btn-block"><span class="button__text">Submit</span></button></div></form>');
                                    $("#card-title-heading").text('Enter D-Call Letter Number');
                                    $("#dcallVerifyStep").trigger('shown.bs.tab');
                                    $(".my-login-page .card-wrapper").css('max-width', '1000px');
                                    $("#heading-logo-main").css('margin-left', 'calc(-50vw + 70%)');
                                });
                            } else {
                                if (!data.mobileStatus) {
                                    $("#mobileOtp").next().show();
                                    $("#mobileOtp").next().text('Mobile OTP is invalid')
                                    $("#mobileOtp").addClass('invalid');
                                    $("#mobileOtp").removeClass('valid');
                                } else {
                                    $("#mobileOtp").next().hide();
                                    $("#mobileOtp").addClass('valid');
                                    $("#mobileOtp").removeClass('invalid');
                                }
                                if (!data.emailStatus) {
                                    $("#emailOtp").next().show();
                                    $("#emailOtp").next().text('Email OTP is invalid')
                                    $("#emailOtp").addClass('invalid');
                                    $("#emailOtp").removeClass('valid');
                                } else {
                                    $("#emailOtp").next().hide();
                                    $("#emailOtp").addClass('valid');
                                    $("#emailOtp").removeClass('invalid');
                                }
                            }
                        } else {
                            swal('OOPS!', "OTP Expired !", 'error');
                            $("#otpSection").hide("slow");
                            $("#otpSection").next().find('button span').text('Regenerate OTP');
                            $("#otpSection").next().find('button').attr('onclick', 'generateOtp(this)');
                            $("#emailOtp").val('');
                            $("#mobileOtp").val('');
                        }
                    },
                    error: function(rs, e) {
                        swal('OOPS!', "Failed to resend OTP!", 'error');
                    }
                });
            }
            //location.href = 'querydashboard';
        }

        function validateDCallNumber(obj) {
            var error = 0;
            if ($("#dcallnumber").val().trim() == '') {
                $("#dcallnumber").next().show();
                $("#dcallnumber").next().text('D-Call Letter Number is required')
                $("#dcallnumber").addClass('invalid');
                $("#dcallnumber").removeClass('valid');
                error = error + 1;
            } else {
                $("#dcallnumber").next().hide();
                $("#dcallnumber").addClass('valid');
                $("#dcallnumber").removeClass('invalid');
            }
            if (error == 0) {
                $.ajax({
                    url: "validateDCallNumber?currentUrl=" + document.URL + "&dcallNumber=" + $("#dcallnumber").val().trim(),
                    type: "post",
                    success: function(data) {
                        if (data.status == undefined) {
                            swal('Success!', "D-Call Letter Number Validated !", 'success').then((value) => {
                                $('body').html(data);
                                $('body').removeClass('my-login-page');
                            });
                        } else {
                            $("#dcallnumber").next().show();
                            $("#dcallnumber").next().text('D-Call Letter Number is invalid')
                            $("#dcallnumber").addClass('invalid');
                            $("#dcallnumber").removeClass('valid');
                        }
                    },
                    error: function(rs, e) {
                        swal('OOPS!', "Failed to Validate D-Call Letter Number!", 'error');
                    }
                });
            }
        }

        // script for tab steps
        $('a[data-toggle="tab"]').on('shown.bs.tab', function(e) {

            var href = $(e.target).attr('href');
            var $curr = $(".process-model  a[href='" + href + "']").parent();

            $('.process-model li').removeClass();

            $curr.addClass("active");
            $curr.prevAll().addClass("visited");
        });
        // end  script for tab steps

        function viewOneTimeRegister() {
            $(".my-login-page .card-wrapper").css('max-width', '480px');
            $("#screen1").hide();
            $("#screen2").show('slow');
            $("#step-section").show('slow');
            $("#heading-logo").css('display', 'flex');
            $("#heading-logo").css('width', '78.125vw');
            $("#heading-logo").css('margin-left', 'calc(-50vw + 90%)');
            $("#heading-logo .brand").css('width', '100px');
            $("#heading-logo .title_text").css('margin-left', 'calc(-50vw + 65%)');
            $("#heading-logo .title_text").css('margin-top', '35px');
            $("#heading-logo").css('transition', 'margin-left 1s');
            $("#procedure-div").modal('hide');
            $("#heading-logo").hide();
            $("#heading-logo-main").show();
            $("#heading-logo-main").css('display', 'flex');
            $("#heading-logo-main").css('transition', 'margin-left 1s');
        }

        function showSample() {
            $("#dcallSample").show();
        }

        function showProcedure() {
            $("#procedure-div").modal('show');
        }

        function displayNextScreen(obj) {
            $(obj).attr('disabled', 'disabled');
            setTimeout(function() {
                $("#nextPageBtn").show('slow');
                $("#procedure-div .modal-body").animate({
                    scrollTop: $(document).height()
                }, "slow");
            }, 2000);
        }
    function showLoader() {
	$("#overlay").css("display", "block");
	$('#overlay').height($("body").innerHeight());
}

function hideLoader() {
	setTimeout(function() {
		$("#overlay").css("display", "none");
	}, 500);
}    
    </script>
</body>